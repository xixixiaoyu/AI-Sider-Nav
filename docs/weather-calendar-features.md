# 天气和日历功能说明

## 🌤️ 天气功能

### 功能特性
- **实时天气显示**：显示当前温度、天气状况和图标
- **自动定位**：使用浏览器地理位置API自动获取当前位置
- **手动城市设置**：支持手动输入城市名称
- **温度单位切换**：支持摄氏度和华氏度
- **智能缓存**：天气数据缓存30分钟，减少API调用

### 使用说明

#### 1. 启用天气功能
天气功能默认启用，如需关闭可在设置中调整。

#### 2. 位置权限
首次使用时，浏览器会请求位置权限：
- **允许**：自动获取当前位置的天气
- **拒绝**：可在设置中手动输入城市名称

#### 3. API密钥配置
为了获得更好的服务质量，建议配置自己的OpenWeatherMap API密钥：

1. 访问 [OpenWeatherMap](https://openweathermap.org/api) 注册账号
2. 获取免费API密钥
3. 在扩展设置中配置API密钥

### 错误处理
- **位置权限被拒绝**：提示用户手动设置城市
- **网络连接问题**：显示友好的错误提示
- **API密钥无效**：提示用户配置有效密钥
- **城市未找到**：提示用户检查城市名称

## 📅 日历功能

### 功能特性
- **月历视图**：完整的月历显示
- **今日高亮**：当前日期特殊标记
- **月份导航**：支持前后月份切换
- **周开始日设置**：支持周一或周日开始
- **日期选择**：点击日期进行选择

### 使用说明

#### 1. 打开日历
点击时间显示区域即可打开日历模态框。

#### 2. 导航操作
- **左右箭头**：切换月份
- **回到今天**：快速跳转到当前月份
- **关闭按钮**：关闭日历

#### 3. 日期选择
- 点击任意日期进行选择
- 选中的日期会有特殊标记
- 点击其他月份的日期会自动跳转到对应月份

### 设置选项
- **启用/禁用日历**：控制是否显示日历功能
- **周开始日**：选择周一或周日作为一周的开始
- **显示周数**：是否显示周数（暂未实现）

## 🛠️ 开发者信息

### 技术实现
- **Vue 3 Composition API**：现代化的响应式框架
- **TypeScript**：类型安全的开发体验
- **Pinia**：状态管理
- **OpenWeatherMap API**：天气数据来源

### 文件结构
```
src/
├── types/weather.ts           # 天气相关类型定义
├── stores/weather.ts          # 天气数据管理
├── components/
│   ├── WeatherDisplay.vue     # 天气显示组件
│   ├── CalendarModal.vue      # 日历模态框
│   └── TimeDisplay.vue        # 时间显示（已增强）
└── App.vue                    # 主应用（已更新）
```

### 权限配置
在 `manifest.json` 中添加了以下权限：
- `geolocation`：地理位置访问
- `https://api.openweathermap.org/*`：天气API访问

## 🔧 故障排除

### 常见问题

1. **天气不显示**
   - 检查是否启用了天气功能
   - 确认位置权限或城市设置
   - 验证API密钥是否有效

2. **日历点击无反应**
   - 确认日历功能已启用
   - 检查时间显示区域是否可点击

3. **位置获取失败**
   - 检查浏览器位置权限设置
   - 尝试手动输入城市名称
   - 确认网络连接正常

### 性能优化
- 天气数据智能缓存，避免频繁API调用
- 组件懒加载，提升页面加载速度
- 响应式设计，适配各种屏幕尺寸

## 📝 更新日志

### v1.1.0 (当前版本)
- ✅ 新增天气显示功能
- ✅ 新增日历模态框
- ✅ 时间显示支持点击查看日历
- ✅ 完善的错误处理和用户提示
- ✅ 响应式设计优化

### 计划功能
- 🔄 天气预报（未来几天）
- 🔄 日历事件提醒
- 🔄 更多天气数据（风速、湿度等详细信息）
- 🔄 主题色彩自定义
